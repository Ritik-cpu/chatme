{"version":3,"sources":["firebase.js","contexts/AuthContexts.js","components/Chats.js","components/Login.js","components/App.js","index.js"],"names":["auth","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","AuthContext","React","createContext","AuthProvider","children","useState","loading","setLoading","user","setUser","history","useHistory","useEffect","onAuthStateChanged","push","value","Provider","Chats","didMountRef","useRef","useContext","a","signOut","url","fetch","response","blob","data","File","type","current","axios","get","headers","email","uid","then","catch","e","formdata","FormData","append","getFile","photoURL","avatar","name","post","console","log","className","AppBar","position","Toolbar","style","justifyContent","Typography","variant","display","alignItems","Avatar","src","Button","onClick","color","height","projectID","userName","userSecret","Login","id","Card","CardContent","background","padding","marginTop","signInWithRedirect","firebase","GoogleAuthProvider","GoogleOutlined","marginRight","App","fontFamily","path","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"8LAqBWA,G,MADSC,wBAXG,CACrBC,OAAQ,0CACRC,WAAY,+BACZC,UAAW,eACXC,cAAe,2BACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBAKGR,QChBdS,EAAYC,IAAMC,gBAIXC,EAAa,SAAC,GAAc,IAAbC,EAAY,EAAZA,SACxB,EAA4BC,oBAAS,GAArC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAuBF,mBAAS,MAAhC,mBAAOG,EAAP,KAAaC,EAAb,KACMC,EAAQC,cACdC,qBAAU,WACNrB,EAAKsB,oBAAmB,SAACL,GACrBC,EAAQD,GACRD,GAAW,GAERC,GAAME,EAAQI,KAAK,eAG5B,CAACN,EAAME,IACT,IAAMK,EAAM,CAACP,QACb,OACI,kBAACR,EAAYgB,SAAb,CAAsBD,MAAOA,IACvBT,GAAWF,I,8FCdV,SAASa,IACtB,IAAMC,EAAcC,kBAAO,GAC3B,EAAgCd,oBAAS,GAAzC,mBAAQC,EAAR,KAAiBC,EAAjB,KACQC,EDPeY,qBAAWpB,GCO1BQ,KACFE,EAAUC,cAJc,4CAM9B,sBAAAU,EAAA,sEACQ9B,EAAK+B,UADb,OAEEZ,EAAQI,KAAK,KAFf,4CAN8B,kEAW9B,WAAuBS,GAAvB,iBAAAF,EAAA,sEACuBG,MAAMD,GAD7B,cACME,EADN,gBAEmBA,EAASC,OAF5B,cAEMC,EAFN,yBAGS,IAAIC,KAAK,CAACD,GAAO,WAAY,CAAEE,KAAM,gBAH9C,4CAX8B,sBA4D9B,OA3CAjB,qBAAU,WACR,IAAKM,EAAYY,QAAS,CAGxB,GAFAZ,EAAYY,SAAU,GAEjBtB,GAAiB,OAATA,EAEX,YADAE,EAAQI,KAAK,KAIfiB,IAAMC,IACJ,sCACA,CAAEC,QAAS,CACT,aAAc,uCACd,YAAazB,EAAK0B,MAClB,cAAe1B,EAAK2B,OAIvBC,MAAK,kBAAM7B,GAAW,MAEtB8B,OAAM,SAAAC,GACL,IAAIC,EAAW,IAAIC,SACnBD,EAASE,OAAO,QAASjC,EAAK0B,OAC9BK,EAASE,OAAO,WAAYjC,EAAK0B,OACjCK,EAASE,OAAO,SAAUjC,EAAK2B,KAzCP,2CA2CxBO,CAAQlC,EAAKmC,UACZP,MAAK,SAAAQ,GACJL,EAASE,OAAO,SAAUG,EAAQA,EAAOC,MAEzCd,IAAMe,KACJ,mCACAP,EACA,CAAEN,QAAS,CAAE,cAAe,0CAE7BG,MAAK,kBAAM7B,GAAW,MACtB8B,OAAM,SAAAC,GAAC,OAAIS,QAAQC,IAAI,IAAKV,EAAEb,sBAIpC,CAACjB,EAAME,KAGLF,GAAQF,EAAgB,8BAG3B,yBAAK2C,UAAU,cACb,kBAACC,EAAA,EAAD,CAAQC,SAAS,UACb,kBAACC,EAAA,EAAD,CAASC,MAAO,CAACC,eAAe,kBAC9B,kBAACC,EAAA,EAAD,CAAYC,QAAQ,KAAKH,MAAO,CAACI,QAAQ,OAAOC,WAAW,WACzD,kBAACC,EAAA,EAAD,CAAQC,IAAKpD,EAAKmC,WADpB,UAIA,kBAACkB,EAAA,EAAD,CAAQC,QAtEY,2CAsEWC,MAAM,WAArC,YAGN,kBAAC,IAAD,CACEC,OAAO,qBACPC,UAAU,uCACVC,SAAU1D,EAAK0B,MACfiC,WAAY3D,EAAK2B,O,+BC/EV,SAASiC,IACtB,OACE,yBAAKC,GAAG,cAWN,kBAACC,EAAA,EAAD,CAAMD,GAAG,cACL,kBAACE,EAAA,EAAD,KACE,kBAAChB,EAAA,EAAD,CAAYC,QAAQ,KAAKH,MAAO,CAACmB,WAAW,UAAUT,MAAM,QAAQU,QAAQ,QAASV,MAAM,WAA3F,qBAGA,kBAACF,EAAA,EAAD,CAAQR,MAAO,CAACmB,WAAW,UAAUE,UAAU,OAAOX,MAAM,SAAUD,QAAS,WAAKvE,EAAKoF,mBAAmB,IAAIC,IAASrF,KAAKsF,sBAC9H,kBAACC,EAAA,EAAD,CAAgBzB,MAAO,CAAC0B,YAAY,UADpC,2BCHGC,MAff,WACE,OACE,yBAAK3B,MAAO,CAAE4B,WAAY,WACxB,kBAAC,IAAD,KACE,kBAAC,EAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,KAAK,SAASC,UAAWlE,IAChC,kBAAC,IAAD,CAAOiE,KAAK,IAAIC,UAAWf,SCXvCgB,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,U","file":"static/js/main.d9cea81c.chunk.js","sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport 'firebase/auth'\r\n// import { getAnalytics } from \"firebase/analytics\";\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDcrpOk-jPqJzHvuq3wsQ7LCUAhcK3xbqQ\",\r\n  authDomain: \"chatme-25df5.firebaseapp.com\",\r\n  projectId: \"chatme-25df5\",\r\n  storageBucket: \"chatme-25df5.appspot.com\",\r\n  messagingSenderId: \"508209621773\",\r\n  appId: \"1:508209621773:web:c159e1af99f6dbd14d1e44\",\r\n  measurementId: \"G-6H4ZVLBQDR\"\r\n};\r\n\r\n// Initialize Firebase\r\n export const APP = initializeApp(firebaseConfig);\r\nexport var auth=APP.auth()\r\n// const analytics = getAnalytics(app)","import React,{useContext, useState, useEffect} from 'react'\r\nimport { useHistory } from 'react-router-dom';\r\nimport {auth} from '../firebase'\r\n\r\n\r\nconst AuthContext=React.createContext();\r\n\r\nexport const useAuth=()=>useContext(AuthContext)\r\n\r\nexport const AuthProvider=({children})=>{\r\n    const [loading, setLoading]=useState(true)\r\n    const [user, setUser]= useState(null);\r\n    const history=useHistory();\r\n    useEffect(()=>{\r\n        auth.onAuthStateChanged((user)=>{\r\n            setUser(user);\r\n            setLoading(false);\r\n\r\n            if(user) history.push('/chats')\r\n        })\r\n        \r\n    },[user, history]);\r\n    const value={user}\r\n    return(\r\n        <AuthContext.Provider value={value}> \r\n            {!loading && children}\r\n        </AuthContext.Provider>\r\n    )\r\n}\r\n\r\n\r\n\r\n","import React, { useRef, useState, useEffect } from \"react\"\r\n\r\nimport axios from 'axios'\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { ChatEngine } from 'react-chat-engine'\r\n\r\nimport { useAuth } from \"../contexts/AuthContexts\"\r\n\r\nimport { auth } from \"../firebase\"\r\nimport { AppBar, Avatar, Button, Toolbar,Typography } from \"@material-ui/core\"\r\n\r\nexport default function Chats() {\r\n  const didMountRef = useRef(false)\r\n  const [ loading, setLoading ] = useState(true)\r\n  const  {user}  = useAuth()\r\n  const history = useHistory()\r\n\r\n  async function handleLogout() {\r\n    await auth.signOut()\r\n    history.push(\"/\")\r\n  }\r\n\r\n  async function getFile(url) {\r\n    let response = await fetch(url);\r\n    let data = await response.blob();\r\n    return new File([data], \"test.jpg\", { type: 'image/jpeg' });\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!didMountRef.current) {\r\n      didMountRef.current = true\r\n\r\n      if (!user || user === null) {\r\n        history.push(\"/\")\r\n        return\r\n      }\r\n      \r\n      axios.get(\r\n        'https://api.chatengine.io/users/me/',\r\n        { headers: { \r\n          \"project-id\": 'a89e0748-474c-4f6f-87b5-b577ef61da8b',\r\n          \"user-name\": user.email,\r\n          \"user-secret\": user.uid\r\n        }}\r\n      )\r\n\r\n      .then(() => setLoading(false))\r\n\r\n      .catch(e => {\r\n        let formdata = new FormData()\r\n        formdata.append('email', user.email)\r\n        formdata.append('username', user.email)\r\n        formdata.append('secret', user.uid)\r\n\r\n        getFile(user.photoURL)\r\n        .then(avatar => {\r\n          formdata.append('avatar', avatar, avatar.name)\r\n\r\n          axios.post(\r\n            'https://api.chatengine.io/users/',\r\n            formdata,\r\n            { headers: { \"private-key\": '013eab24-8b67-46a1-ad0e-56d2b43d8f45' }}\r\n          )\r\n          .then(() => setLoading(false))\r\n          .catch(e => console.log('e', e.response))\r\n        })\r\n      })\r\n    }\r\n  }, [user, history])\r\n  \r\n\r\n  if (!user || loading) return <div />\r\n\r\n  return (\r\n    <div className='chats-page'>\r\n      <AppBar position=\"static\" >\r\n          <Toolbar style={{justifyContent:'space-between'}}>\r\n            <Typography variant=\"h6\" style={{display:'flex',alignItems:'center'}}>\r\n              <Avatar src={user.photoURL}/>\r\n              Chatme\r\n            </Typography>\r\n            <Button onClick={handleLogout} color=\"inherit\">Logout</Button>\r\n          </Toolbar>\r\n      </AppBar>\r\n      <ChatEngine \r\n        height='calc(100vh - 66px)'\r\n        projectID='a89e0748-474c-4f6f-87b5-b577ef61da8b'\r\n        userName={user.email}\r\n        userSecret={user.uid}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","import React from \"react\"\r\n\r\nimport { GoogleOutlined,  } from '@ant-design/icons'\r\n\r\nimport firebase from \"firebase/app\"\r\n\r\nimport { auth } from \"../firebase\"\r\nimport { Button, Card, CardContent, Typography } from \"@material-ui/core\"\r\n\r\nexport default function Login() {\r\n  return (\r\n    <div id='login-page'>\r\n      {/* <div id='login-card'>\r\n        <h2>Welcome in chatme!</h2>\r\n\r\n        <div\r\n          className='login-button google'\r\n          onClick={() => auth.signInWithRedirect(new firebase.auth.GoogleAuthProvider())}\r\n        >\r\n         <GoogleOutlined/>Sign In with Google\r\n        </div>\r\n      </div> */}\r\n      <Card id='login-card'>\r\n          <CardContent>\r\n            <Typography variant=\"h5\" style={{background:'#2979ff',color:'white',padding:'16px'}} color=\"initial\">\r\n              WELCOME IN CHATME\r\n            </Typography>\r\n            <Button style={{background:'#ff1744',marginTop:'40px',color:'white'}} onClick={()=>{auth.signInWithRedirect(new firebase.auth.GoogleAuthProvider())}}>\r\n            <GoogleOutlined style={{marginRight:'10px'}}/> Sign in with Google\r\n            </Button>\r\n          </CardContent>\r\n      </Card>\r\n      \r\n    </div>\r\n  )\r\n}\r\n","import React from \"react\"\n\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\"\n\nimport { AuthProvider } from '../contexts/AuthContexts'\n\nimport Chats from \"./Chats\"\nimport Login from \"./Login\"\n\nfunction App() {\n  return (\n    <div style={{ fontFamily: 'Avenir' }}>\n      <Router>\n        <AuthProvider>\n          <Switch>\n            <Route path=\"/chats\" component={Chats} /> \n            <Route path=\"/\" component={Login} />\n          </Switch>\n        </AuthProvider>\n      </Router>\n    </div>\n  )\n} \n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}